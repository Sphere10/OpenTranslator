@{
	ViewBag.Title = "Open Translation";
}

@Html.InitCrudPopupsForGrid("OriginalTextGrid", "Admin", 470, 1000, "String")

<center><h2>Open Language Translation - User Screen </h2></center>

<style>
	.awe-ajaxcheckboxlist-field li {
		display: inline-block;
	}
</style>

 @(Html.Awe().InitPopupForm()
				.Name("Login")
				.Url(Url.Action("Create", "Login"))
				.Title("Admin Login")
				.Width(100)
				.Success("RedirectToAdmin"))

<input type="button" value="Login" onclick="awe.open('Login')" class="awe-btn mbtn" style="float:right" />
<br /><br />
<script>
	$(function () {
		debugger;
		$('#chkColumns').change(function () {
			debugger;
            var val = $('#chkColumns').val();
            if (!val) val = "[]";
			$('#OriginalTextGrid').data('api').load({ oparams: { selectedColumns: JSON.parse(val), choosingColumns: true } });
        });
	});
	
</script>

 @(Html.Awe().InitPopupForm()
				.Name("pf1")
				.Url(Url.Action("Edit", "User"))
				.Title("Edit Translation")
				.Success("UpdateGrid"))

<div class="bar">
	
	@Html.Awe().AjaxCheckboxList("chkColumns").Url(Url.Action("GetColumnsItems","Admin")).Load(true)
</div>

@(Html.Awe().Grid("OriginalTextGrid")
			.Url(Url.Action("OriginalTextGridGetItems","Admin"))
			.Parameter("UserType","User")
			.Groupable(false)
			.Columns())


<br /><br />
<script>
	function disableBack() {
		window.location.hash = "User";
		window.location.hash = "Again-No-back-button";//again because google chrome don't insert first hash into history
		window.onhashchange = function () { window.location.hash = "User"; }
	}
	window.onload = disableBack();
	window.onpageshow = function (evt) { if (evt.persisted) disableBack() }

	function RedirectToAdmin() {
		var url = '@Url.Action("Index", "Admin")';
		window.location = url;
	}
	function UpdateGrid(result, popup) {
		debugger;
		$('#OriginalTextGrid').data('api').load({});
	}
	function getVal(i, columnname) {
		return function (model) {
			var div = "";
			var a = model.Values[i];
			if (a != "")
				div = a + '<a onclick="awe.open(\'pf1\', { params: { TextId: \'' + model.TextId + '\', code : \'' + columnname + '\' } })"><span style="cursor: pointer;" class="ico-edit"></span></a>';
			else
				div = '<br/><a onclick="awe.open(\'pf1\', { params: { TextId: \'' + model.TextId + '\', code : \'' + columnname + '\' } })"><span style="cursor: pointer;" class="ico-edit"></span></a>';
			return div;
		};
	}
</script>



